<HTML>
<HEAD>
<TITLE>Pouívání resload_Protect#?</TITLE>
<meta name="DC.Language" content="cz">
<meta http-equiv="content-language" content="cz">
<meta http-equiv="content-type" content="text/html; charset=windows-1250">
<!-- $Id: prot.html 1.5 2014/12/04 23:37:38 wepl Exp wepl $ -->
</HEAD>
<BODY>
<h3>Pouívání resload_Protect#?</h3>
<h4>Teorie</h4>
Vyskytnou se rùzné situace, ve kterıch se mùe hodit bıt informován o pøístupech
nainstalovaného programu do urèitıch oblastí pamìti. S pomocí funkcí <a href="../autodoc.html">resload_Protect#?</a>
je moné chránit urèité oblasti pamìti pøed ètením anebo zapisovaním procesorem.
Chránit znamená, e kadı pøístup do tatko chránìné oblasti vyvolá Access Fault
vyjímku, která vyústí v chybovı requester WHDLoadu. Jestlie oznaèíte oblast pamìti
jako chránìnou pouitím <a href="../autodoc.html">resload_Protect#?</a> funkce,
WHDLoad zmìní popisy oné oblasti v pøekladaèi MMU. Kadı pøístup k chránìné pamìové stránce (velikost stránky je v souèasnosti 4096 bajtù)
vytvoøí chybu access fault, i kdy bude mít chránìná oblast pamìti velikost jen jednoho bajtu.
Vısledkem pouívání funkce je silné zpomalení bìhu programu. Obzvláštì pokud jsou èásti kódu
v chránìné stránce. Pokud program na rychlosti bìhu závisí, mùou se vyskytnout odlišnosti
v tom, co program dìlá. Nìkteré programy tak nemusí s ochranou pamìti pøes resload_Protect fungovat.

<h4>Pøíklad: checksums kódu</h4>
Pokud instalujete hru pomocí WHDLoad, budete muset patchnout pùvodní loader
ve høe tak, aby program nahrával pøes WHDLoad. Nìkteré hry provádìjí kontrolní
souèet klíèovıch oblastí programu, aby detekovaly zmìny pùvodního kódu. Tyto
rutiny mùe bıt nìkdy tìké najít. Ale pouití <a href="../autodoc.html">resload_Protect#?</a> funkcí
hledání usnadòuje. Všechno, co musíte udìlat, je chránit bajty, které jste
zmìnili v kódu hry pøed pøeètením. Pak kadá rutina, která se pokouší pøeèíst
váš opravenı kód zpùsobí chybu a vy zjistíte, kde kontrola je.
<h4>Omezení</h4>
Nesmíte chránit pamì, kde je SSP. Pokud to udìláte a stane se vyjímka, dojde
k dvojité chybì na sbìrnici, protoe CPU nebude schopné zapsat stackframe vyjímky.
Poté u se dá program jen resetnout. WHDLoad ovìøuje konflikt chránìné pamìti se SSP a ukonèí se, pokud takovı stav
nastane. Tohle ale nepomáhá, pokud se pozdìji SSP zmìní.

<p>Pro víc omezení a informací si prosím pøeètìtì soubor Autodoc na téma
rùznıch funkcí resload_Protect.
<li><a href="../autodoc.html#resload_ProtectRead">resload_ProtectRead</a>
<li><a href="../autodoc.html#resload_ProtectReadWrite">resload_ProtectReadWrite</a>
<li><a href="../autodoc.html#resload_ProtectRemove">resload_ProtectRemove</a>
<li><a href="../autodoc.html#resload_ProtectSMC">resload_ProtectSMC</a>
<li><a href="../autodoc.html#resload_ProtectWrite">resload_ProtectWrite</a>
</ul>
</BODY>
</HTML>
