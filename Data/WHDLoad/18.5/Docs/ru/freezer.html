<html>

<head>
<title>System Monitors / Freezer</title>
<meta name="DC.Language" content="ru">
<meta http-equiv="content-language" content="ru">
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<!-- $Id: freezer.html 1.8 2014/12/04 23:37:38 wepl Exp wepl $ -->
</head>

<body>

<h3>Системные мониторы / Отладчики</h3>

<p>
Существует множество различных программ для отладки.
Их использование может оказать большую помощь в процессе разработки и отладки программ.
Напрямую WHDLoad поддерживает такие как HRTmon и ThrillKill.
Если вам требуется поддержка других отладчиков, свяжитесь со мной и я постараюсь добавить их поддержку.
При старте WHDLoad проверяет, активен ли какой-то из поддерживаемых мониторов. 
Если хотя бы один из известных мониторов будет обнаружен, то WHDLoad производит
специальные действия. Если WHDLoad использует MMU, то
объявленная память используется монитором и
кэшируется WriteThrough. В процессе работы игр/демо
WHDLoad пересылает все NMI-исключения NMI-вектору,
записывая их в таблицу векторов монитора.
Дополнительно, если VBR перемещён с помощью WHDLoad
(опция <a href="opt.html#NoVBRMove">NoVBRMove/S</a> не включена, и
процессор не ниже 68010), то при каждом прерывании
будет проверяться не нажата ли на клавиатуре
клавиша <a href="opt.html#FreezeKey">FreezeKey</a>.
И если клавиша нажата, то WHDLoad обрабатывает нажатие, преобразует stackframe в NMI stackframe и входит в монитор
через его обработчик NMI. </p>

<h4>HRTmon</h4>

<p>Обнаружение в памяти должно бы быть стабильно, особенно с новыми версиями монитора, т.к. в нем были добавлены новые сигнатуры.
Будьте внимательны, если WHDLoad использует MMU: 
не делайте обращений из HRTmon к памяти за пределами BaseMem/ExpMem.
Это вызовет ошибку, потому что HrtMon не сможет обработать Access Fault Exception.</p>

<p>В свойствах HRTmonPrefs, обязательно включите 'No VBR move',
иначе не сможете войти в монитор, во время работы WHDLoad.</p>

<p>После возвращения из активированного HRTmon в запущенную под WHDLoad программу,
изображение на дисплее может быть "битым", потому что HRTmon перезаписывает некоторые
Custom-регистры. Вы можете этого избежать, если перед возвратом укажете HRTmon корректные значения, например,
<tt>'e $100 $5200'</tt> для 32-цветного режима экрана.</p>

<p>HRTmon, встроенный в WinUAE может быть определен только в том случае, если
HRTmon был предварительно активирован хотя бы раз (нажатием клавиши PgUp).
Потому как после первой активации будет выставлен вектор NMI, который требуется WHDLoad для нахождения монитора.</p>

<p>Существуют более новые версии HRTmon, которые будучи запущенными из WHDLoad, добавляют специальные команды.
Таким образом, вы можете загружать/сохранять файлы и использовать функции <a
href="prot.html">resload_Protect#?</a> из HRTmon. Эти версии можно скачать здесь <a
href="http://www.whdload.de/whdload/Tools/">WHDLoad page</a>.

<h4>ThrillKill</h4>

<p>В отладчике отсутствует какая-либо сигнатура,
поэтому используются некие сравнения кодов.
Поэтому процесс определения может не работать с
другими версиями. </p>
</body>
</html>
