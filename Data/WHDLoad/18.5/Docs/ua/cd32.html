<HTML>
<HEAD>
<TITLE>WHDLoadCD32</TITLE>
<meta name="DC.Language" content="ua">
<meta http-equiv="content-language" content="ua">
<meta http-equiv="content-type" content="text/html; charset=windows-1251">
<!-- $Id: cd32.html 1.3 2013/11/25 22:13:32 wepl Exp wepl $ -->
</HEAD>
<BODY>

<h3>WHDLoadCD32</h3>

WHDLoadCD32 являє собою спеціальну версію WHDLoad для запуску на реальній приставці CD&sup3;&sup2;, спеціально оптимизовану під цю платформу. Але майте на увазі, що розрахована вона тільки на стандартну версію обладнання CD&sup3;&sup2;.
Тобто WHDLoadCD32 НЕ буде працювати на SX-32 або будь-якій іншій машині.

<p>Ця версія має наступні відмінності в порівнянні зі звичайною WHDLoad:
<ul>

<li>не вимагає й не використовує ключового файлу WHDLoad, так що компакт-диски з WHDLoadCD32 можуть вільно поширюватися

<li>підтримується тільки процесор 68020, що означає відсутність підтримки MMU

<li>швидка пам'ять (fast memory) не підтримується

<li>абсолютно відсутня підтримка запису, збереження ігор, результатів гри й дампів (coredumps), тому що CD звичайний пристрій тільки для читання

<li>багато марних опцій на CD&sup3;&sup2; було вилучено, щоб зменшити розмір виконавчих файлів і розмір займаної пам'яті, дивіться <a href="opt.html">Робота із програмою і її параметри</a>
<li>наступні resload-функції НЕ реалізовані і їхнє використання викличе завершення WHDLoad з помилкою TDREASON_ILLEGALARGS:

<ul>
<li><a href="../autodoc.html#resload_DiskLoadDev">resload_DiskLoadDev</a>
<li><a href="../autodoc.html#resload_ProtectRead">resload_ProtectRead</a>
<li><a href="../autodoc.html#resload_ProtectReadWrite">resload_ProtectReadWrite</a>
<li><a href="../autodoc.html#resload_ProtectWrite">resload_ProtectWrite</a>
<li><a href="../autodoc.html#resload_ProtectRemove">resload_ProtectRemove</a>
<li><a href="../autodoc.html#resload_ProtectSMC">resload_ProtectSMC</a>
</ul>

<li>наступні resload-функції - пустунки, вони нічого не роблять, але й ніколи не приводять до помилки:

  <ul>
<li><a href="../autodoc.html#resload_SaveFile">resload_SaveFile</a>
<li><a href="../autodoc.html#resload_SaveFileOffset">resload_SaveFileOffset</a>
<li><a href="../autodoc.html#resload_DeleteFile">resload_DeleteFile</a>
</ul>

<li>відсутня підтримка <a href="freezer.html">системних моніторів та відладчиків</a>

<li>відсутня внутрішня перевірка вільного стекового простору, як і у звичайному WHDLoad, виходячи з моїх тестів, значення за замовчуванням в 4096 байт досить для WHDLoadCD32

</ul>

<h3>Корисні поради для WHDLoad з використанням CD&sup3;&sup2;</h3>

Основна проблема з CD&sup3;&sup2; це обмежений обсяг основної пам'яті. Усього лише 2 мегабайти пам'яті (chip memory). Однак для WHDLoad, потрібно якнайбільше пам'яті особливо для операції попереднього завантаження (Preload). Переконайтеся, що в пам`ять не завантажено ніяких інших програм, коли Ви запускаєте й установлюєте програми, використовуючи WHDLoadCD32.

<ul>

<li>Якщо програма-інсталятор пропонує Вам вибір між образами дисків (diskimages) і файлами (files), використайте файли, тому, що простіше закешувати багато маленьких файлів, чим один-два великих.
<li>Якщо програма-інсталятор дозволяє стиснути файли, використовуючи ProPack/FImp, то використайте цю можливість і запакуйте всі файли (RNC1 стискає краще). Стислі файли вимагають менше місця для Preload і практично не впливають на час завантаження.
<li>Перед запуском WHDLoadCD32 використайте AllocMemReverse (або будь-яку іншу подібну програму). AllocMemReverse це маленька програмка, включена в пакет розроблювача WHDLoad. Вона патче exec-функцію AllocMem, щоб для виділення пам'яті завжди використовувався атрибут MEM_REVERSE. У результаті, пам'ять виділяється з вільного обсягу зверху вниз, а не знизу нагору, як звичайно. Таким чином, нижня область пам'яті залишається вільною. Робиться це тому, що WHDLoad необхідно, щоб пам'ять починалася з адреси 0, на початку пам'яті chipmem. Вся пам'ять, яка використана в цьому нижньому регіоні має потребу у свопі. Для зберігання цих даних, необхідний додатковий обсяг пам'яті. Чим більше використовується пам'яті з нижніх областей, тим менше пам'яті доступно для встановлених програм і для попереднього завантаження файлів.
<li>Завжди використовувайте опцію  <a href="opt.html#Data">Data</a>.
Preload не знає які файли буде завантажені встановленою програмою, так що ця функція завантажує всі файли, які знаходить. Щоб не вантажити непотрібні файли, створіть директорію, що містить тільки необхідні файли. Удаліть всяку белеберду типа #?.info, #?.Slave, ReadMe, Manual, ... а потім, запускайте WHDLoad з параметрами Slave і Data, наприклад:
<br>
<tt>WHDLoadCD32 :Slaves/XYZ.Slave Data=:Data/XYZ Preload</tt>.<br>
Міняти поточну директорію немає необхідності.
<li>НЕ використовувайте файли даних, стислі XPK. Розпакування XPK вимагає дуже багато пам'яті, тому що бібліотеки XPK теж повинні бути для цього в пам'яті, а сама по собі декомпресія також має потребу в пам'яті, так що це все приведе до фрагментації.
</ul>
</BODY>
</HTML>
